<p-tabs [value]="0" (valueChange)="onTabChange($event)" class="h-full">
    <p-tablist>
        <p-tab [value]="0">Assets</p-tab>
        <p-tab [value]="1">Playlists</p-tab>
        <p-tab [value]="2">Cliparts</p-tab>
    </p-tablist>
    <p-tabpanels class="!px-0 h-full">
        <p-tabpanel [value]="0">
            <div class="flex flex-col gap-3 h-full">
                <app-asset-filter class="w-full" (filterChange)="onFilterChange($event)" />
                <div *ngIf="tabIndex() == 0" class="relative flex-1 overflow-y-auto cursor-grab" cdkDropList cdkDragPreviewContainer="body" cdkDropListOrientation="vertical">
                    <div class="absolute w-full flex flex-col gap-3">
                        @for (item of filteredContents(); track $index) {
                            <app-asset-list-item [asset]="item" [customCSS]="'absolute top-0 h-20 w-20'" />
                        } @empty {
                            <div class="flex items-center justify-center h-full w-full" [ngClass]="{ 'col-span-3 ': assetViewModeSignal() == 'Grid' }">
                                <p class="text-gray-400 italic">No items found</p>
                            </div>
                        }
                    </div>
                </div>
            </div>
        </p-tabpanel>
        <p-tabpanel [value]="1">
            <div class="flex flex-col gap-3 h-full">
                <app-playlist-filter (filterChange)="onFilterChange($event)" />
            
                <p-table
                    #contentTable
                    dataKey="id"
                    [value]="filteredContents()"
                    [(selection)]="selectionContent"
                    (selectionChange)="onSelectionChange($event)"
                    [scrollable]="true" 
                    scrollHeight="300px" 
                    selectionMode="single"
                    size="small"
                    stripedRows
                    showGridlines
                >
                    <ng-template #header>
                        <tr>
                            <th>Name</th>
                            <th>Duration</th>
                        </tr>
                    </ng-template>
                    <ng-template #body let-item>
                        <tr [pSelectableRow]="item">
                            <td><p class="line-clamp-1">{{ item.name }}</p></td>
                            <td>{{ utils.timeConversion(item.duration) }}</td>
                        </tr>
                    </ng-template>
                    <ng-template #emptymessage>
                        <tr>
                            <td colspan="3" [height]="20">
                                <div class="flex justify-center p-5"><p class="italic">No Data found</p></div>
                            </td>
                        </tr>
                    </ng-template>
                </p-table>
            </div>
        </p-tabpanel>
        <p-tabpanel [value]="2">
            <div class="flex flex-col gap-3 h-full">
                <app-filters (filterChange)="onFilterChange($event)" [showOthers]="false" />
                <div *ngIf="tabIndex() == 2" class="relative flex-1 overflow-y-auto cursor-grab">
                    <div class="absolute grid grid-cols-2" cdkDropList [cdkDropListData]="filteredContents()" cdkDropListSortingDisabled cdkDropListHasAnchor>
                        @for (item of filteredContents(); track $index) {
                            <div class="relative h-full w-full" cdkDrag [cdkDragData]="item">
                                <app-preview-assets class="h-full w-full flex items-center justify-center" [currentContent]="item" [showControls]="false" />
                                <app-preview-assets class="absolute top-0 h-20 w-20 flex items-center justify-center" 
                                    [currentContent]="item" [showControls]="false" *cdkDragPlaceholder />
                            </div>
                        } @empty {
                            <div class="flex items-center justify-center h-full w-full">
                                <p class="text-gray-400 italic">No items found</p>
                            </div>
                        }
                    </div>
                </div>
            </div>
        </p-tabpanel>
    </p-tabpanels>
</p-tabs>